package com.ers.controllers;

import java.util.List;

import com.google.gson.Gson;
import com.ers.models.ErsReimbursement;
import com.ers.services.ReimbursementService;

import io.javalin.http.Handler;

public class ReimbursementController {
	
	ReimbursementService rs = new ReimbursementService();
			
	public Handler getAllReimbursementsHandler = (ctx) -> {
		
		//if(ctx.req.getSession(false) != null) {
		
		List<ErsReimbursement> allReimbursements = rs.getAllReimbursements();
		
		Gson gson = new Gson();
		
		String JSONReimbursements = gson.toJson(allReimbursements);
		
		ctx.result(JSONReimbursements);
		
		ctx.status(200);
		
		
		
		
	//	} else {
		//	ctx.status(403);
		//}
	};
	
	//public Handler getPastReimbursementsHandler = (ctx) -> {
		
	//	ctx.result("Login Failed");	
		

	//};
	public Handler getPendingReimbursementEmployeesHandler = (ctx) -> {
		
			
		List<ErsReimbursement> pendingReimbursementEmployees = rs.getPendingReimbursementEmployees();
		
		Gson gson = new Gson();
		
		String JSONPendingReimbursementEmployees = gson.toJson(pendingReimbursementEmployees);
		
		ctx.result(JSONPendingReimbursementEmployees);
		
		ctx.status(200);
		
		
	
	};
	
	public Handler getApprovedReimbursementEmployeesHandler = (ctx) -> {
		
		
		List<ErsReimbursement> approvedReimbursementEmployees = rs.getApprovedReimbursementEmployees();
		
		Gson gson = new Gson();
		
		String JSONApprovedReimbursementEmployees = gson.toJson(approvedReimbursementEmployees);
		
		ctx.result(JSONApprovedReimbursementEmployees);
		
		ctx.status(200);
		
		
	
	};
}
